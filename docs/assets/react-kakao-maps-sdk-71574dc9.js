import{e as L,r as o}from"./react-c355daf9.js";import{l as $}from"./react-dom-07b5f8f8.js";function F(){return F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},F.apply(this,arguments)}function Y(e,t){if(e==null)return{};var a,r,c={},s=Object.keys(e);for(r=0;r<s.length;r++)t.indexOf(a=s[r])>=0||(c[a]=e[a]);return c}const O=typeof window<"u"&&typeof document<"u"?o.useLayoutEffect:o.useEffect,g=(e,t,a)=>{O(()=>{if(!e||!a)return;const r=(...c)=>c===void 0?a(e):a(e,...c);return kakao.maps.event.addListener(e,t,r),()=>{kakao.maps.event.removeListener(e,t,r)}},[e,t,a])};var W;(function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.LOADING=1]="LOADING",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE"})(W||(W={}));class S{constructor({appkey:t,id:a="__reactKakaoMapsSdkloaderId",libraries:r=[],nonce:c,retries:s=3,url:u="//dapi.kakao.com/v2/maps/sdk.js"}){if(this.id=void 0,this.appkey=void 0,this.url=void 0,this.libraries=void 0,this.nonce=void 0,this.retries=void 0,this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=void 0,this.id=a,this.appkey=t,this.libraries=r,this.nonce=c,this.retries=s,this.url=u,S.instance){if(!S.equalOptions(this.options,S.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(S.instance.options)}`);return S.instance}S.instance=this}get options(){return{appkey:this.appkey,id:this.id,libraries:this.libraries,nonce:this.nonce,retries:this.retries,url:this.url}}static isLoaded(){return new Promise(t=>S.instance?S.instance.status===W.FAILURE||S.instance.status===W.INITIALIZED?t(!1):(S.instance.status===W.LOADING&&S.loadcheckcallbacks.push(a=>t(!a)),t(!0)):window.kakao&&window.kakao.maps?window.kakao.maps.load(()=>{t(!0)}):S.loadcheckcallbacks.push(a=>{t(!a)}))}load(){return new Promise((t,a)=>{this.loadCallback(r=>{r?a(r.error):t(window.kakao)})})}get status(){return this.onerrorEvent?W.FAILURE:this.done?W.SUCCESS:this.loading?W.LOADING:W.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}loadCallback(t){this.callbacks.push(t),this.execute()}resetIfRetryingFailed(){this.failed&&this.reset()}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=void 0}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.kakao&&window.kakao.maps)return console.warn("Kakao Maps이 이미 외부 요소에 의해 로딩되어 있습니다.설정한 옵션과 일치 하지 않을 수 있으며, 이에 따른 예상치 동작이 발생할 수 있습니다."),void window.kakao.maps.load(this.callback);this.loading||(this.loading=!0,this.setScript())}}setScript(){document.getElementById(this.id)&&this.callback();const t=this.createUrl(),a=document.createElement("script");a.id=this.id,a.type="text/javascript",a.src=t,a.onerror=this.loadErrorCallback.bind(this),a.onload=this.callback.bind(this),a.defer=!0,a.async=!0,this.nonce&&(a.nonce=this.nonce),document.head.appendChild(a)}loadErrorCallback(t,a,r,c,s){if(this.errors.push({event:t,source:a,lineno:r,colno:c,error:s}),this.errors.length<=this.retries){const u=this.errors.length*2**this.errors.length;console.log(`Failed to load Kakao Maps script, retrying in ${u} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},u)}else this.onerrorEvent=this.errors[this.errors.length-1],this.callback()}createUrl(){let t=this.url;return t+=`?appkey=${this.appkey}`,this.libraries.length&&(t+=`&libraries=${this.libraries.join(",")}`),t+="&autoload=false",t}deleteScript(){const t=document.getElementById(this.id);t&&t.remove()}callback(){kakao.maps.load(()=>{this.done=!0,this.loading=!1,this.callbacks.forEach(t=>{t(this.onerrorEvent)}),this.callbacks=[],S.loadcheckcallbacks.forEach(t=>{t(this.onerrorEvent)}),S.loadcheckcallbacks=[]})}static equalOptions(t,a){if(t.appkey!==a.appkey||t.id!==a.id||t.libraries.length!==a.libraries.length)return!1;for(let r=0;r<t.libraries.length;++r)if(t.libraries[r]!==a.libraries[r])return!1;return t.nonce===a.nonce&&t.retries===a.retries&&t.url===a.url}}S.instance=void 0,S.loadcheckcallbacks=[];const ue=["id","as","children","center","isPanto","padding","disableDoubleClick","disableDoubleClickZoom","draggable","zoomable","keyboardShortcuts","level","maxLevel","minLevel","mapTypeId","projectionId","scrollwheel","tileAnimation","onBoundsChanged","onCenterChanged","onClick","onDoubleClick","onDrag","onDragEnd","onDragStart","onIdle","onMaptypeidChanged","onMouseMove","onRightClick","onTileLoaded","onZoomChanged","onZoomStart","onCreate"],Q=L.createContext(void 0),fe=L.forwardRef((e,t)=>{let{id:a,as:r,children:c,center:s,isPanto:u=!1,padding:d=32,disableDoubleClick:k,disableDoubleClickZoom:p,draggable:f,zoomable:h,keyboardShortcuts:l,level:m,maxLevel:I,minLevel:E,mapTypeId:y,projectionId:i,scrollwheel:v,tileAnimation:C,onBoundsChanged:n,onCenterChanged:M,onClick:A,onDoubleClick:D,onDrag:b,onDragEnd:T,onDragStart:R,onIdle:x,onMaptypeidChanged:P,onMouseMove:j,onRightClick:U,onTileLoaded:G,onZoomChanged:oe,onZoomStart:ae,onCreate:B}=e,ne=Y(e,ue);const re=r||"div",[J,se]=o.useState(!1),[w,ie]=o.useState(),X=o.useRef(null);return O(()=>{S.isLoaded().then(se)},[]),O(()=>{if(!J)return;const Z=X.current;if(!Z)return;const H="lat"in s?new kakao.maps.LatLng(s.lat,s.lng):new kakao.maps.Coords(s.x,s.y),le=new kakao.maps.Map(Z,{center:H,disableDoubleClick:k,disableDoubleClickZoom:p,draggable:f,keyboardShortcuts:l,level:m,mapTypeId:y,projectionId:i,scrollwheel:v,tileAnimation:C});return ie(le),()=>{Z.innerHTML=""}},[J,k,p,y,C]),o.useImperativeHandle(t,()=>w,[w]),O(()=>{w&&B&&B(w)},[w,B]),O(()=>{if(!w)return;let Z=w.getCenter();Z instanceof kakao.maps.Coords&&(Z=Z.toLatLng());const H="lat"in s?new kakao.maps.LatLng(s.lat,s.lng):new kakao.maps.Coords(s.x,s.y);H instanceof kakao.maps.LatLng&&H.equals(Z)||H instanceof kakao.maps.Coords&&H.toLatLng().equals(Z)||(u?w.panTo(H,d):w.setCenter(H))},[w,s.lat,s.lng,s.x,s.y]),O(()=>{w&&f!==void 0&&w.setDraggable(f)},[w,f]),O(()=>{w&&h!==void 0&&w.setZoomable(h)},[w,h]),O(()=>{w&&l&&typeof l=="boolean"&&w.setKeyboardShortcuts(l)},[w,l]),O(()=>{w&&m&&w.setLevel(m)},[w,m]),O(()=>{w&&y&&w.setMapTypeId(y)},[w,y]),O(()=>{w&&i&&w.setProjectionId(i)},[w,i]),O(()=>{w&&I&&w.setMaxLevel(I)},[w,I]),O(()=>{w&&E&&w.setMinLevel(E)},[w,E]),g(w,"bounds_changed",n),g(w,"center_changed",M),g(w,"click",A),g(w,"dblclick",D),g(w,"drag",b),g(w,"dragstart",R),g(w,"dragend",T),g(w,"idle",x),g(w,"maptypeid_changed",P),g(w,"mousemove",j),g(w,"rightclick",U),g(w,"tilesloaded",G),g(w,"zoom_changed",oe),g(w,"zoom_start",ae),L.createElement(L.Fragment,null,L.createElement(re,F({id:a||"react-kakao-maps-sdk-map-container"},ne,{ref:X})),w&&L.createElement(Q.Provider,{value:w},c))}),z=e=>{const t=o.useContext(Q);if(!t)throw new Error((e?e+" Component":"useMap")+" must exist inside Map Component!");return t},q=L.forwardRef(({map:e,position:t,marker:a,children:r,altitude:c,disableAutoPan:s,range:u,removable:d,zIndex:k,onCreate:p},f)=>{const h=o.useRef(document.createElement("div")),l=o.useMemo(()=>{const m=new kakao.maps.InfoWindow({altitude:c,disableAutoPan:s,range:u,removable:d,zIndex:k,content:h.current,position:t});return h.current.style.display="none",m},[s,d]);return o.useImperativeHandle(f,()=>l,[l]),o.useLayoutEffect(()=>(l.open(e,a),()=>{l.close()}),[e,a]),o.useLayoutEffect(()=>{p&&p(l)},[l,p]),o.useLayoutEffect(()=>{l&&l.setPosition(t)},[l,t]),o.useLayoutEffect(()=>{l&&c&&l.setAltitude(c)},[l,c]),o.useLayoutEffect(()=>{l&&u&&l.setRange(u)},[l,u]),o.useLayoutEffect(()=>{l&&k&&l.setZIndex(k)},[l,k]),h.current.parentElement&&$.createPortal(r,h.current.parentElement)}),V=L.createContext(void 0);L.forwardRef(({children:e,averageCenter:t,calculator:a,clickable:r,disableClickZoom:c,gridSize:s,hoverable:u,minClusterSize:d,minLevel:k,styles:p,texts:f,onClusterclick:h,onClusterdblclick:l,onClustered:m,onClusterout:I,onClusterover:E,onClusterrightclick:y,onCreate:i},v)=>{const C=z("MarkerClusterer"),n=o.useMemo(()=>{if(window.kakao.maps.MarkerClusterer)return new kakao.maps.MarkerClusterer({averageCenter:t,calculator:a,clickable:r,disableClickZoom:c,gridSize:s,hoverable:u,minClusterSize:d,minLevel:k,styles:p,texts:f});console.warn("clusterer 라이브러리를 별도 로드 해야 사용 가능합니다. `https://apis.map.kakao.com/web/guide/#loadlibrary`")},[]);return o.useImperativeHandle(v,()=>n,[n]),o.useLayoutEffect(()=>{n==null||n.setMap(C)},[C,n]),o.useLayoutEffect(()=>{n&&i&&i(n)},[n,i]),o.useLayoutEffect(()=>{n&&s&&(n.setGridSize(s),n.redraw())},[n,s]),o.useLayoutEffect(()=>{n&&d&&(n.setMinClusterSize(d),n.redraw())},[n,d]),o.useLayoutEffect(()=>{n&&t!==void 0&&(n.setAverageCenter(t),n.redraw())},[n,t]),o.useLayoutEffect(()=>{n&&k&&(n.setMinLevel(k),n.redraw())},[n,k]),o.useLayoutEffect(()=>{n&&f&&(n.setTexts(f),n.redraw())},[n,f]),o.useLayoutEffect(()=>{n&&a&&(n.setCalculator(a),n.redraw())},[n,a]),g(n,"clustered",m),g(n,"clusterclick",h),g(n,"clusterover",E),g(n,"clusterout",I),g(n,"clusterdblclick",l),g(n,"clusterrightclick",y),o.useLayoutEffect(()=>{n&&p&&(n.setStyles(p),n.redraw())},[n,p]),n?L.createElement(V.Provider,{value:n},e,L.createElement(ce,{children:e})):null});const ce=({})=>{const e=o.useContext(V);return O(()=>{e.redraw()}),null},_=L.forwardRef(({map:e,position:t,children:a,altitude:r,clickable:c,draggable:s,image:u,infoWindowOptions:d,onCreate:k,onClick:p,onDragEnd:f,onDragStart:h,onMouseOut:l,onMouseOver:m,opacity:I,range:E,title:y,zIndex:i},v)=>{const C=o.useContext(V),n=o.useMemo(()=>new kakao.maps.Marker({altitude:r,clickable:c,draggable:s,image:u,opacity:I,range:E,title:y,zIndex:i,position:t}),[]);return o.useImperativeHandle(v,()=>n,[n]),o.useLayoutEffect(()=>(C?C.addMarker(n,!0):n.setMap(e),()=>{C?C.removeMarker(n,!0):n.setMap(null)}),[e,C,n]),o.useLayoutEffect(()=>{k&&k(n)},[n,k]),g(n,"click",p),g(n,"dragstart",h),g(n,"dragend",f),g(n,"mouseout",l),g(n,"mouseover",m),o.useLayoutEffect(()=>{e&&n&&t&&n.setPosition(t)},[e,n,t]),o.useLayoutEffect(()=>{e&&n&&u&&n.setImage(u)},[e,n,u]),o.useLayoutEffect(()=>{e&&n&&r&&n.setAltitude(r)},[e,n,r]),o.useLayoutEffect(()=>{e&&n&&c!==void 0&&n.setClickable(c)},[e,n,c]),o.useLayoutEffect(()=>{e&&n&&s!==void 0&&n.setDraggable(s)},[e,n,s]),o.useLayoutEffect(()=>{e&&n&&I&&n.setOpacity(I)},[e,n,I]),o.useLayoutEffect(()=>{e&&n&&E&&n.setRange(E)},[e,n,E]),o.useLayoutEffect(()=>{e&&n&&y&&n.setTitle(y)},[e,n,y]),o.useLayoutEffect(()=>{e&&n&&i&&n.setZIndex(i)},[e,n,i]),a?L.createElement(q,{position:t,map:e,marker:n,altitude:d==null?void 0:d.altitude,disableAutoPan:d==null?void 0:d.disableAutoPan,range:d==null?void 0:d.range,removable:d==null?void 0:d.removable,zIndex:d==null?void 0:d.zIndex},a):null}),me=L.forwardRef(({image:e,position:t,children:a,clickable:r,draggable:c,infoWindowOptions:s,onClick:u,onDragEnd:d,onDragStart:k,onMouseOut:p,onMouseOver:f,onCreate:h,opacity:l,title:m,zIndex:I},E)=>{const y=z("MapMarker"),i=o.useMemo(()=>{var C,n,M,A,D,b,T,R,x,P,j,U;return e&&new kakao.maps.MarkerImage(e.src,new kakao.maps.Size(e.size.width,e.size.height),{alt:(C=e.options)==null?void 0:C.alt,coords:(n=e.options)==null?void 0:n.coords,offset:((M=e.options)==null?void 0:M.offset)&&new kakao.maps.Point((A=e.options)==null?void 0:A.offset.x,(D=e.options)==null?void 0:D.offset.y),shape:(b=e.options)==null?void 0:b.shape,spriteOrigin:((T=e.options)==null?void 0:T.spriteOrigin)&&new kakao.maps.Point((R=e.options)==null?void 0:R.spriteOrigin.x,(x=e.options)==null?void 0:x.spriteOrigin.y),spriteSize:((P=e.options)==null?void 0:P.spriteSize)&&new kakao.maps.Size((j=e.options)==null?void 0:j.spriteSize.width,(U=e.options)==null?void 0:U.spriteSize.height)})},[e]),v=o.useMemo(()=>"lat"in t?new kakao.maps.LatLng(t.lat,t.lng):new kakao.maps.Coords(t.x,t.y).toLatLng(),[t.lat,t.lng,t.x,t.y]);return L.createElement(_,{map:y,position:v,image:i,clickable:r,draggable:c,infoWindowOptions:s,onClick:u,onDragEnd:d,onDragStart:k,onMouseOut:p,onMouseOver:f,onCreate:h,opacity:l,title:m,zIndex:I,ref:E},a)});L.forwardRef(({position:e,children:t,disableAutoPan:a,removable:r,zIndex:c,onCreate:s},u)=>{const d=z("MapInfoWindow"),k=o.useMemo(()=>new kakao.maps.LatLng(e.lat,e.lng),[e.lat,e.lng]);return L.createElement(q,{disableAutoPan:a,removable:r,zIndex:c,map:d,position:k,onCreate:s,ref:u},t)});const ge=L.forwardRef(({position:e,children:t,clickable:a,xAnchor:r,yAnchor:c,zIndex:s,onCreate:u},d)=>{const k=o.useContext(V),p=z("CustomOverlayMap"),f=o.useRef(document.createElement("div")),h=o.useMemo(()=>new kakao.maps.LatLng(e.lat,e.lng),[e.lat,e.lng]),l=o.useMemo(()=>{const m=new kakao.maps.CustomOverlay({clickable:a,xAnchor:r,yAnchor:c,zIndex:s,position:h,content:f.current});return f.current.style.display="none",m},[a,r,c]);return o.useImperativeHandle(d,()=>l,[l]),o.useLayoutEffect(()=>{if(p)return k?k.addMarker(l,!0):l.setMap(p),()=>{k?k.removeMarker(l,!0):l.setMap(null)}},[p,k,l]),o.useLayoutEffect(()=>{u&&u(l)},[l,u]),o.useLayoutEffect(()=>{l.setPosition(h)},[l,h]),o.useLayoutEffect(()=>{s&&l.setZIndex(s)},[l,s]),f.current.parentElement&&$.createPortal(t,f.current.parentElement)});L.forwardRef(({position:e=kakao.maps.ControlPosition.TOPRIGHT},t)=>{const a=z("MapTypeControl"),r=o.useMemo(()=>new kakao.maps.MapTypeControl,[]);return o.useImperativeHandle(t,()=>r,[r]),o.useLayoutEffect(()=>(a.addControl(r,e),()=>{a.removeControl(r)}),[a,r,e]),null});L.forwardRef(({position:e=kakao.maps.ControlPosition.RIGHT},t)=>{const a=z("ZoomControl"),r=o.useMemo(()=>new kakao.maps.ZoomControl,[]);return o.useImperativeHandle(t,()=>r,[r]),o.useEffect(()=>(a.addControl(r,e),()=>{a.removeControl(r)}),[a,e]),null});L.forwardRef(({center:e,radius:t,fillColor:a,fillOpacity:r,strokeColor:c,strokeOpacity:s,strokeStyle:u,strokeWeight:d,zIndex:k,onMouseover:p,onMouseout:f,onMousemove:h,onMousedown:l,onClick:m,onCreate:I},E)=>{const y=z("Circle"),i=o.useMemo(()=>new kakao.maps.LatLng(e.lat,e.lng),[e.lat,e.lng]),v=o.useMemo(()=>new kakao.maps.Circle({center:i,radius:t,fillColor:a,fillOpacity:r,strokeColor:c,strokeOpacity:s,strokeStyle:u,strokeWeight:d,zIndex:k}),[]);return o.useImperativeHandle(E,()=>v,[v]),o.useLayoutEffect(()=>(v.setMap(y),()=>{v.setMap(null)}),[y,v]),o.useLayoutEffect(()=>{I&&I(v)},[v,I]),o.useLayoutEffect(()=>{v&&v.setPosition(i)},[v,i]),o.useLayoutEffect(()=>{v.setRadius(t)},[v,t]),o.useLayoutEffect(()=>{k&&v.setZIndex(k)},[v,k]),o.useLayoutEffect(()=>{v.setOptions({fillColor:a,fillOpacity:r,strokeColor:c,strokeOpacity:s,strokeStyle:u,strokeWeight:d})},[v,a,r,c,s,u,d]),g(v,"mouseover",p),g(v,"mouseout",f),g(v,"mousemove",h),g(v,"mousedown",l),g(v,"click",m),null});L.forwardRef(({path:e,endArrow:t,onClick:a,onMousedown:r,onMousemove:c,onMouseout:s,onMouseover:u,onCreate:d,strokeColor:k,strokeOpacity:p,strokeStyle:f,strokeWeight:h,zIndex:l},m)=>{const I=z("Polyline"),E=o.useMemo(()=>e.every(i=>i instanceof Array)?e.map(i=>i.map(v=>new kakao.maps.LatLng(v.lat,v.lng))):e.map(i=>new kakao.maps.LatLng(i.lat,i.lng)),[e]),y=o.useMemo(()=>new kakao.maps.Polyline({path:E,endArrow:t,strokeColor:k,strokeOpacity:p,strokeStyle:f,strokeWeight:h,zIndex:l}),[]);return o.useImperativeHandle(m,()=>y,[y]),o.useLayoutEffect(()=>(y.setMap(I),()=>y.setMap(null)),[I,y]),o.useLayoutEffect(()=>{d&&d(y)},[y,d]),o.useLayoutEffect(()=>{y.setOptions({endArrow:t,strokeColor:k,strokeOpacity:p,strokeStyle:f,strokeWeight:h})},[y,t,k,p,f,h]),o.useLayoutEffect(()=>{y.setPath(E)},[y,E]),o.useLayoutEffect(()=>{l&&y.setZIndex(l)},[y,l]),g(y,"mouseover",u),g(y,"mouseout",s),g(y,"mousemove",c),g(y,"mousedown",r),g(y,"click",a),null});L.forwardRef(({path:e,onClick:t,onMousedown:a,onMousemove:r,onMouseout:c,onMouseover:s,onCreate:u,strokeColor:d,strokeOpacity:k,strokeStyle:p,strokeWeight:f,fillColor:h,fillOpacity:l,zIndex:m},I)=>{const E=z("Polygon"),y=o.useMemo(()=>e.every(v=>v instanceof Array)?e.map(v=>v.map(C=>new kakao.maps.LatLng(C.lat,C.lng))):e.map(v=>new kakao.maps.LatLng(v.lat,v.lng)),[e]),i=o.useMemo(()=>new kakao.maps.Polygon({path:y,fillColor:h,fillOpacity:l,strokeColor:d,strokeOpacity:k,strokeStyle:p,strokeWeight:f,zIndex:m}),[]);return o.useImperativeHandle(I,()=>i,[i]),o.useLayoutEffect(()=>(i.setMap(E),()=>i.setMap(null)),[E,i]),o.useLayoutEffect(()=>{u&&u(i)},[i,u]),o.useLayoutEffect(()=>{i.setOptions({fillColor:h,fillOpacity:l,strokeColor:d,strokeOpacity:k,strokeStyle:p,strokeWeight:f})},[i,h,l,d,k,p,f]),o.useLayoutEffect(()=>{i.setPath(y)},[i,y]),o.useLayoutEffect(()=>{m&&i.setZIndex(m)},[i,m]),g(i,"mouseover",s),g(i,"mouseout",c),g(i,"mousemove",r),g(i,"mousedown",a),g(i,"click",t),null});L.forwardRef(({bounds:e,onClick:t,onMousedown:a,onMousemove:r,onMouseout:c,onMouseover:s,onCreate:u,strokeColor:d,strokeOpacity:k,strokeStyle:p,strokeWeight:f,fillColor:h,fillOpacity:l,zIndex:m},I)=>{const E=z("Rectangle"),y=o.useMemo(()=>new kakao.maps.LatLngBounds(new kakao.maps.LatLng(e.sw.lat,e.sw.lng),new kakao.maps.LatLng(e.ne.lat,e.ne.lng)),[e]),i=o.useMemo(()=>new kakao.maps.Rectangle({bounds:y,fillColor:h,fillOpacity:l,strokeColor:d,strokeOpacity:k,strokeStyle:p,strokeWeight:f,zIndex:m}),[]);return o.useImperativeHandle(I,()=>i,[i]),o.useLayoutEffect(()=>(i.setMap(E),()=>i.setMap(null)),[E,i]),o.useLayoutEffect(()=>{u&&u(i)},[i,u]),o.useLayoutEffect(()=>{i.setOptions({fillColor:h,fillOpacity:l,strokeColor:d,strokeOpacity:k,strokeStyle:p,strokeWeight:f})},[i,h,l,d,k,p,f]),o.useLayoutEffect(()=>{i.setBounds(y)},[i,y]),o.useLayoutEffect(()=>{m&&i.setZIndex(m)},[i,m]),g(i,"mouseover",s),g(i,"mouseout",c),g(i,"mousemove",r),g(i,"mousedown",a),g(i,"click",t),null});L.forwardRef(({center:e,rx:t,ry:a,fillColor:r,fillOpacity:c,strokeColor:s,strokeOpacity:u,strokeStyle:d,strokeWeight:k,zIndex:p,onMouseover:f,onMouseout:h,onMousemove:l,onMousedown:m,onClick:I,onCreate:E},y)=>{const i=z("Ellipse"),v=o.useMemo(()=>new kakao.maps.LatLng(e.lat,e.lng),[e.lat,e.lng]),C=o.useMemo(()=>new kakao.maps.Ellipse({center:v,rx:t,ry:a,fillColor:r,fillOpacity:c,strokeColor:s,strokeOpacity:u,strokeStyle:d,strokeWeight:k,zIndex:p}),[]);return o.useImperativeHandle(y,()=>C,[C]),o.useLayoutEffect(()=>(C.setMap(i),()=>{C.setMap(null)}),[i,C]),o.useLayoutEffect(()=>{E&&E(C)},[C,E]),o.useLayoutEffect(()=>{C&&C.setPosition(v)},[C,v]),o.useLayoutEffect(()=>{C.setRadius(t,a)},[C,t,a]),o.useLayoutEffect(()=>{p&&C.setZIndex(p)},[C,p]),o.useLayoutEffect(()=>{C.setOptions({fillColor:r,fillOpacity:c,strokeColor:s,strokeOpacity:u,strokeStyle:d,strokeWeight:k})},[C,r,c,s,u,d,k]),g(C,"mouseover",f),g(C,"mouseout",h),g(C,"mousemove",l),g(C,"mousedown",m),g(C,"click",I),null});L.forwardRef(({draw:e,onAdd:t,onRemove:a,onCreate:r},c)=>{const s=z(),u=o.useMemo(()=>{class d extends kakao.maps.AbstractOverlay{constructor(p,f,h){super(),this.draw=p,this.onAdd=f,this.onRemove=h}}return new d(e,t,a)},[e,t,a]);return o.useImperativeHandle(c,()=>u,[u]),o.useLayoutEffect(()=>(u.setMap(s),()=>{u.setMap(null)}),[s,u]),o.useLayoutEffect(()=>{r&&r(u)},[u,r]),null});const de=["id","as","children","position","pan","panoId","panoX","panoY","tilt","zoom","onCreate","onInit","onPanoidChange","onPositionChanged","onViewpointChange","onErrorGetNearestPanoId"],ee=L.createContext(void 0);L.forwardRef((e,t)=>{let{id:a,as:r,children:c,position:s,pan:u,panoId:d,panoX:k,panoY:p,tilt:f,zoom:h,onCreate:l,onInit:m,onPanoidChange:I,onPositionChanged:E,onViewpointChange:y,onErrorGetNearestPanoId:i}=e,v=Y(e,de);const C=r||"div",[n,M]=o.useState(!1),[A,D]=o.useState(!0),[b,T]=o.useState(),R=o.useRef(null);return O(()=>{S.isLoaded().then(M)},[]),O(()=>{if(!n)return;const x=R.current;if(!x)return;const P=new kakao.maps.Roadview(x,{pan:u,panoId:d,panoX:k,panoY:p,tilt:f,zoom:h});return T(P),()=>{x.innerHTML=""}},[n,k,p,h]),o.useImperativeHandle(t,()=>b,[b]),O(()=>{b&&l&&l(b)},[b,l]),O(()=>{if(!b||d||b.getPosition().getLat()===s.lat&&b.getPosition().getLng()===s.lng)return;const x=new kakao.maps.LatLng(s.lat,s.lng);new kakao.maps.RoadviewClient().getNearestPanoId(x,s.radius,P=>{P===null&&i?i(b):b.setPanoId(P,x)})},[b,d,s.lat,s.lng,s.radius,i]),O(()=>{if(!b||!d||d===b.getPanoId()||b.getPosition().getLat()===s.lat&&b.getPosition().getLng()===s.lng)return;const x=new kakao.maps.LatLng(s.lat,s.lng);b.setPanoId(d,x)},[b,d,s.lat,s.lng]),O(()=>{if(!b)return;const x=b.getViewpoint();x.pan===u&&x.tilt===f||(u&&(x.pan=u),f&&(x.tilt=f),b.setViewpoint(x))},[b,u,f]),g(b,"init",x=>{D(!1),m&&m(x)}),g(b,"panoid_changed",I),g(b,"viewpoint_changed",y),g(b,"position_changed",E),L.createElement(L.Fragment,null,L.createElement(C,F({ref:R,id:a||"react-kakao-maps-sdk-roadview-container"},v)),b&&!A&&L.createElement(ee.Provider,{value:b},c))});const K=e=>{const t=o.useContext(ee);if(!t)throw new Error((e?e+" Component":"useRoadview")+" must exist inside Roadview Component!");return t};L.forwardRef(({position:e,children:t,clickable:a,xAnchor:r,yAnchor:c,zIndex:s,altitude:u,range:d,onCreate:k},p)=>{const f=K("CustomOverlayRoadview"),h=o.useRef(document.createElement("div")),l=o.useMemo(()=>"lat"in e?new kakao.maps.LatLng(e.lat,e.lng):new kakao.maps.Viewpoint(e.pan,e.tilt,e.zoom,e.panoId),[e.lat,e.lng,e.pan,e.tilt,e.zoom,e.panoId]),m=o.useMemo(()=>{const I=new kakao.maps.CustomOverlay({clickable:a,xAnchor:r,yAnchor:c,zIndex:s,position:l,content:h.current});return h.current.style.display="none",I},[a,r,c]);return o.useImperativeHandle(p,()=>m,[m]),o.useLayoutEffect(()=>{if(f)return m.setMap(f),()=>{m.setMap(null)}},[m,f]),o.useLayoutEffect(()=>{k&&k(m)},[m,k]),o.useLayoutEffect(()=>{m.setPosition(l)},[m,l]),o.useLayoutEffect(()=>{s&&m.setZIndex(s)},[m,s]),o.useLayoutEffect(()=>{u&&m.setAltitude(u)},[m,u]),o.useLayoutEffect(()=>{d&&m.setRange(d)},[m,d]),h.current.parentElement&&$.createPortal(t,h.current.parentElement)});L.forwardRef(({image:e,position:t,children:a,altitude:r,clickable:c,infoWindowOptions:s,onClick:u,onDragEnd:d,onDragStart:k,onMouseOut:p,onMouseOver:f,onCreate:h,opacity:l,range:m,title:I,zIndex:E},y)=>{const i=K("RoadviewMarker"),v=o.useMemo(()=>{var n,M,A,D,b,T,R,x,P,j,U,G;return e&&new kakao.maps.MarkerImage(e.src,new kakao.maps.Size(e.size.width,e.size.height),{alt:(n=e.options)==null?void 0:n.alt,coords:(M=e.options)==null?void 0:M.coords,offset:((A=e.options)==null?void 0:A.offset)&&new kakao.maps.Point((D=e.options)==null?void 0:D.offset.x,(b=e.options)==null?void 0:b.offset.y),shape:(T=e.options)==null?void 0:T.shape,spriteOrigin:((R=e.options)==null?void 0:R.spriteOrigin)&&new kakao.maps.Point((x=e.options)==null?void 0:x.spriteOrigin.x,(P=e.options)==null?void 0:P.spriteOrigin.y),spriteSize:((j=e.options)==null?void 0:j.spriteSize)&&new kakao.maps.Size((U=e.options)==null?void 0:U.spriteSize.width,(G=e.options)==null?void 0:G.spriteSize.height)})},[e]),C=o.useMemo(()=>"lat"in t?new kakao.maps.LatLng(t.lat,t.lng):"x"in t?new kakao.maps.Coords(t.x,t.y).toLatLng():new kakao.maps.Viewpoint(t.pan,t.tilt,t.zoom,t.panoId),[t.lat,t.lng,t.x,t.y,t.pan,t.tilt,t.zoom,t==null?void 0:t.panoId]);return L.createElement(_,{map:i,position:C,image:v,altitude:r,clickable:c,infoWindowOptions:s,onClick:u,onDragEnd:d,onDragStart:k,onMouseOut:p,onMouseOver:f,onCreate:h,opacity:l,range:m,title:I,zIndex:E,ref:y},a)});L.forwardRef(({position:e,children:t,altitude:a,disableAutoPan:r,range:c,removable:s,zIndex:u,onCreate:d},k)=>{const p=K("RoadviewInfoWindow"),f=o.useMemo(()=>"lat"in e?new kakao.maps.LatLng(e.lat,e.lng):new kakao.maps.Viewpoint(e.pan,e.tilt,e.zoom,e.panoId),[e.lat,e.lng,e.pan,e.tilt,e.zoom,e.panoId]);return L.createElement(q,{altitude:a,disableAutoPan:r,range:c,removable:s,zIndex:u,map:p,position:f,onCreate:d,ref:k},t)});const te=L.createContext(void 0);function N(e,t,a){o.useLayoutEffect(()=>{e&&a&&e.addListener(t,(...r)=>r===void 0?a(e):a(e,...r))},[a,e,t])}L.forwardRef(function({arrowOptions:e,circleOptions:t,ellipseOptions:a,markerOptions:r,polygonOptions:c,polylineOptions:s,rectangleOptions:u,drawingMode:d,guideTooltip:k,onSelect:p,onDrawstart:f,onDraw:h,onDrawend:l,onDrawnext:m,onCancle:I,onRemove:E,onStateChanged:y,onCreate:i,children:v},C){const n=z("Toolbox"),M=o.useMemo(()=>{if(window.kakao.maps.drawing)return new kakao.maps.drawing.DrawingManager({map:n,drawingMode:d,guideTooltip:k,arrowOptions:e,circleOptions:t,ellipseOptions:a,markerOptions:r,polygonOptions:c,polylineOptions:s,rectangleOptions:u});console.warn("drawing 라이브러리를 별도 로드 해야 사용 가능합니다. `https://apis.map.kakao.com/web/guide/#loadlibrary`")},[]);return o.useImperativeHandle(C,()=>M,[M]),o.useLayoutEffect(()=>{M&&i&&i(M)},[M,i]),N(M,"select",p),N(M,"drawstart",f),N(M,"draw",h),N(M,"drawend",l),N(M,"drawnext",m),N(M,"cancel",I),N(M,"remove",E),N(M,"state_changed",y),M?L.createElement(te.Provider,{value:M},v):null});L.forwardRef(function({position:e},t){e=e||kakao.maps.ControlPosition.TOP;const a=z("Toolbox"),r=o.useContext(te);if(!r)throw new Error("Toolbox must exist inside DrawingManager Component!`");const c=o.useMemo(()=>new kakao.maps.drawing.Toolbox({drawingManager:r}),[r]);return o.useImperativeHandle(t,()=>c,[c]),o.useLayoutEffect(()=>{const s=c.getElement();return a.addControl(s,e),()=>{a.removeControl(s)}},[a,c,e]),null});L.forwardRef(({id:e="react-kakao-maps-sdk-staticmap-container",style:t,className:a,center:r,marker:c,level:s,mapTypeId:u,onCreate:d},k)=>{const[p,f]=o.useState(),h=o.useRef(null);return O(()=>{if(!window.kakao)return void console.warn("kakao map javascript api를 먼저 불러와야 합니다. `https://apis.map.kakao.com/web/guide`");const l=h.current;l&&kakao.maps.load(()=>{const m=Array.isArray(c)?c.map(E=>F({},E,{position:new kakao.maps.LatLng(E.position.lat,E.position.lng)})):typeof c=="object"&&c.position?F({},c,{position:new kakao.maps.LatLng(c.position.lat,c.position.lng)}):c,I=new kakao.maps.StaticMap(l,{center:new kakao.maps.LatLng(r.lat,r.lng),level:s,mapTypeId:u,marker:m});f(I)})},[JSON.stringify(c)]),o.useImperativeHandle(k,()=>p,[p]),O(()=>{p&&p.setCenter(new kakao.maps.LatLng(r.lat,r.lng))},[p,r.lat,r.lng]),O(()=>{p&&s&&p.setLevel(s)},[p,s]),O(()=>{p&&u&&p.setMapTypeId(u)},[p,u]),O(()=>{p&&d&&d(p)},[p,d]),L.createElement("div",{id:e,style:t,className:a,ref:h})});export{me as M,ge as O,fe as w};
